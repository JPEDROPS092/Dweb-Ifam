const UIUtils={loadingOverlay:{show:function(e){let t=document.getElementById("loading-overlay");if(t){if(e){let n=t.querySelector(".loading-message");n||(n=document.createElement("div"),n.className="loading-message mt-3",t.appendChild(n)),n.textContent=e}}else{t=document.createElement("div"),t.id="loading-overlay",t.className="loading-overlay";const n=document.createElement("div");if(n.className="loading-spinner",t.appendChild(n),e){const n=document.createElement("div");n.className="loading-message mt-3",n.textContent=e,t.appendChild(n)}document.body.appendChild(t)}setTimeout(()=>{t.classList.add("active")},10)},hide:function(){const e=document.getElementById("loading-overlay");e&&(e.classList.remove("active"),setTimeout(()=>{e.parentNode&&e.parentNode.removeChild(e)},300))}},toast:{show:function(e,t="info",n=5e3){let o=document.querySelector(".toast-container");o||(o=document.createElement("div"),o.className="toast-container",document.body.appendChild(o));const a=document.createElement("div");a.className="toast",a.setAttribute("role","alert");let i,s;switch(t){case"success":i="var(--success)",s="bi-check-circle-fill";break;case"error":i="var(--danger)",s="bi-exclamation-triangle-fill";break;case"warning":i="var(--warning)",s="bi-exclamation-circle-fill";break;default:i="var(--info)",s="bi-info-circle-fill"}return a.innerHTML=`\n                <div class="toast-header" style="background-color: ${i}; color: white;">\n                    <i class="bi ${s} me-2"></i>\n                    <strong class="me-auto">${t.charAt(0).toUpperCase()+t.slice(1)}</strong>\n                    <button type="button" class="btn-close btn-close-white" aria-label="Close"></button>\n                </div>\n                <div class="toast-body">\n                    ${e}\n                </div>\n            `,o.appendChild(a),a.querySelector(".btn-close").addEventListener("click",function(){UIUtils.toast.hide(a)}),n>0&&setTimeout(()=>{UIUtils.toast.hide(a)},n),a},hide:function(e){e.classList.add("hiding"),setTimeout(()=>{e.parentNode&&e.parentNode.removeChild(e);const t=document.querySelector(".toast-container");t&&0===t.children.length&&t.parentNode.removeChild(t)},300)}},formButton:{setLoading:function(e,t="Processando..."){const n=document.getElementById(e);n&&(n.hasAttribute("data-original-text")||n.setAttribute("data-original-text",n.innerHTML),n.setAttribute("disabled","disabled"),n.innerHTML=`<span class="spinner-border spinner-border-sm me-2" role="status" aria-hidden="true"></span> ${t}`)},resetLoading:function(e){const t=document.getElementById(e);t&&(t.hasAttribute("data-original-text")&&(t.innerHTML=t.getAttribute("data-original-text"),t.removeAttribute("data-original-text")),t.removeAttribute("disabled"))}},sidebar:{init:function(){const e=document.querySelector(".navbar-toggler-sidebar");if(!e)return;const t=document.querySelector(".sidebar");t&&(e.addEventListener("click",function(){t.classList.toggle("show")}),document.addEventListener("click",function(n){!t.contains(n.target)&&!e.contains(n.target)&&t.classList.contains("show")&&t.classList.remove("show")}))}},tables:{init:function(){document.querySelectorAll("table:not(.table-responsive)").forEach(e=>{if(e.parentNode.classList.contains("table-responsive"))return;const t=document.createElement("div");t.className="table-responsive",e.parentNode.insertBefore(t,e),t.appendChild(e)})}},init:function(){UIUtils.sidebar.init(),UIUtils.tables.init(),window.jQuery&&$(document).ajaxStart(function(){UIUtils.loadingOverlay.show()}).ajaxStop(function(){UIUtils.loadingOverlay.hide()})}};document.addEventListener("DOMContentLoaded",function(){UIUtils.init()}),window.IFAM=window.IFAM||{},window.IFAM.ui=UIUtils;
